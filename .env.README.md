# Configuración de Variables de Entorno

## Estructura Consolidada

Este proyecto utiliza un **único archivo `.env`** en la raíz del proyecto para centralizar todas las variables de entorno de los tres componentes principales:

- **Backend** (Flask/Python)
- **Frontend** (React + Vite)
- **Mobile** (React Native + Expo)

## Configuración Inicial

1. **Copia el archivo de ejemplo:**
   ```bash
   cp .env.example .env
   ```

2. **Edita el archivo `.env`** con tus valores reales:
   - Claves de API (Groq, Brevo, Google OAuth)
   - Credenciales de base de datos
   - Secretos JWT
   - URLs y puertos según tu entorno

## Estructura del Archivo

El archivo `.env` está organizado por secciones:

### Backend
- `GROQ_API_KEY`: API key para el servicio Groq (IA)
- `DB_HOST`, `DB_PORT`, `DB_NAME`, `DB_USER`, `DB_PASSWORD`: Configuración de MySQL
- `JWT_SECRET_KEY`: Secret para tokens JWT
- `FLASK_ENV`, `FLASK_DEBUG`, `PORT`: Configuración de Flask
- `BREVO_API_KEY`, `SENDER_EMAIL`: Servicio de email

### Frontend
- `VITE_API_URL`: URL del backend (por defecto http://localhost:5000)
- `VITE_GOOGLE_CLIENT_ID`: Client ID de Google OAuth

### Mobile
- Variables específicas para Expo/React Native (si se necesitan)

## Cómo Funciona

### Backend
El backend carga automáticamente las variables desde el `.env` raíz:
```python
# Los archivos backend/database/config.py, backend/app.py y backend/database/connection.py
# están configurados para buscar el .env en la raíz del proyecto
```

### Frontend
Vite carga automáticamente variables que comienzan con `VITE_`:
```javascript
// Accesibles en el código como:
import.meta.env.VITE_API_URL
```

### Mobile
Expo carga variables que comienzan con `EXPO_PUBLIC_`:
```javascript
// Accesibles como:
process.env.EXPO_PUBLIC_API_URL
```

## Seguridad

⚠️ **NUNCA** commitees el archivo `.env` real al repositorio.

El `.gitignore` ya está configurado para ignorar:
- `*.env` (archivos .env en cualquier ubicación)
- Archivos `.env` específicos de cada proyecto

## Docker Compose

Si usas Docker Compose, el archivo `docker-compose.yml` puede referenciar automáticamente el `.env` raíz:

```yaml
services:
  backend:
    env_file:
      - .env
  frontend:
    env_file:
      - .env
```

## Migración desde Estructura Anterior

Si tenías archivos `.env` separados:
1. ✅ Las variables han sido consolidadas en `.env.example` raíz
2. ✅ Los archivos `.env.example` de backend y frontend han sido eliminados
3. ✅ El código está actualizado para leer desde la raíz del proyecto
4. ⚠️ Si tenías archivos `.env` reales (no .example), cópialos al `.env` raíz antes de eliminarlos

## Troubleshooting

### Backend no encuentra las variables
- Verifica que el archivo `.env` está en la raíz del proyecto
- Revisa que los nombres de las variables coincidan exactamente
- Reinicia el servidor Flask después de modificar el `.env`

### Frontend no ve las variables VITE_*
- Las variables deben comenzar con `VITE_`
- Reinicia el servidor de desarrollo de Vite
- Verifica que el archivo `.env` está en la raíz del proyecto

### Errores de permisos o rutas
- Asegúrate de que el archivo `.env` es legible
- En Windows, verifica que no haya problemas con rutas o encoding
